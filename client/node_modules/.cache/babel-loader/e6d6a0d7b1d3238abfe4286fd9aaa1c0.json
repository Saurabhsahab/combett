{"ast":null,"code":"/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @format\n * \n * @emails oncall+draft_js\n */\n'use strict';\n\nvar DraftEffects = require(\"./DraftEffects\");\n\nvar DraftJsDebugLogging = require(\"./DraftJsDebugLogging\");\n\nvar UserAgent = require(\"fbjs/lib/UserAgent\");\n\nvar containsNode = require(\"fbjs/lib/containsNode\");\n\nvar getActiveElement = require(\"fbjs/lib/getActiveElement\");\n\nvar getCorrectDocumentFromNode = require(\"./getCorrectDocumentFromNode\");\n\nvar invariant = require(\"fbjs/lib/invariant\");\n\nvar isElement = require(\"./isElement\");\n\nvar isIE = UserAgent.isBrowser('IE');\n\nfunction getAnonymizedDOM(node, getNodeLabels) {\n  if (!node) {\n    return '[empty]';\n  }\n\n  var anonymized = anonymizeTextWithin(node, getNodeLabels);\n\n  if (anonymized.nodeType === Node.TEXT_NODE) {\n    return anonymized.textContent;\n  }\n\n  !isElement(anonymized) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Node must be an Element if it is not a text node.') : invariant(false) : void 0;\n  var castedElement = anonymized;\n  return castedElement.outerHTML;\n}\n\nfunction anonymizeTextWithin(node, getNodeLabels) {\n  var labels = getNodeLabels !== undefined ? getNodeLabels(node) : [];\n\n  if (node.nodeType === Node.TEXT_NODE) {\n    var length = node.textContent.length;\n    return getCorrectDocumentFromNode(node).createTextNode('[text ' + length + (labels.length ? ' | ' + labels.join(', ') : '') + ']');\n  }\n\n  var clone = node.cloneNode();\n\n  if (clone.nodeType === 1 && labels.length) {\n    clone.setAttribute('data-labels', labels.join(', '));\n  }\n\n  var childNodes = node.childNodes;\n\n  for (var ii = 0; ii < childNodes.length; ii++) {\n    clone.appendChild(anonymizeTextWithin(childNodes[ii], getNodeLabels));\n  }\n\n  return clone;\n}\n\nfunction getAnonymizedEditorDOM(node, getNodeLabels) {\n  // grabbing the DOM content of the Draft editor\n  var currentNode = node; // this should only be used after checking with isElement\n\n  var castedNode = currentNode;\n\n  while (currentNode) {\n    if (isElement(currentNode) && castedNode.hasAttribute('contenteditable')) {\n      // found the Draft editor container\n      return getAnonymizedDOM(currentNode, getNodeLabels);\n    } else {\n      currentNode = currentNode.parentNode;\n      castedNode = currentNode;\n    }\n  }\n\n  return 'Could not find contentEditable parent of node';\n}\n\nfunction getNodeLength(node) {\n  return node.nodeValue === null ? node.childNodes.length : node.nodeValue.length;\n}\n/**\n * In modern non-IE browsers, we can support both forward and backward\n * selections.\n *\n * Note: IE10+ supports the Selection object, but it does not support\n * the `extend` method, which means that even in modern IE, it's not possible\n * to programatically create a backward selection. Thus, for all IE\n * versions, we use the old IE API to create our selections.\n */\n\n\nfunction setDraftEditorSelection(selectionState, node, blockKey, nodeStart, nodeEnd) {\n  // It's possible that the editor has been removed from the DOM but\n  // our selection code doesn't know it yet. Forcing selection in\n  // this case may lead to errors, so just bail now.\n  var documentObject = getCorrectDocumentFromNode(node);\n\n  if (!containsNode(documentObject.documentElement, node)) {\n    return;\n  }\n\n  var selection = documentObject.defaultView.getSelection();\n  var anchorKey = selectionState.getAnchorKey();\n  var anchorOffset = selectionState.getAnchorOffset();\n  var focusKey = selectionState.getFocusKey();\n  var focusOffset = selectionState.getFocusOffset();\n  var isBackward = selectionState.getIsBackward(); // IE doesn't support backward selection. Swap key/offset pairs.\n\n  if (!selection.extend && isBackward) {\n    var tempKey = anchorKey;\n    var tempOffset = anchorOffset;\n    anchorKey = focusKey;\n    anchorOffset = focusOffset;\n    focusKey = tempKey;\n    focusOffset = tempOffset;\n    isBackward = false;\n  }\n\n  var hasAnchor = anchorKey === blockKey && nodeStart <= anchorOffset && nodeEnd >= anchorOffset;\n  var hasFocus = focusKey === blockKey && nodeStart <= focusOffset && nodeEnd >= focusOffset; // If the selection is entirely bound within this node, set the selection\n  // and be done.\n\n  if (hasAnchor && hasFocus) {\n    selection.removeAllRanges();\n    addPointToSelection(selection, node, anchorOffset - nodeStart, selectionState);\n    addFocusToSelection(selection, node, focusOffset - nodeStart, selectionState);\n    return;\n  }\n\n  if (!isBackward) {\n    // If the anchor is within this node, set the range start.\n    if (hasAnchor) {\n      selection.removeAllRanges();\n      addPointToSelection(selection, node, anchorOffset - nodeStart, selectionState);\n    } // If the focus is within this node, we can assume that we have\n    // already set the appropriate start range on the selection, and\n    // can simply extend the selection.\n\n\n    if (hasFocus) {\n      addFocusToSelection(selection, node, focusOffset - nodeStart, selectionState);\n    }\n  } else {\n    // If this node has the focus, set the selection range to be a\n    // collapsed range beginning here. Later, when we encounter the anchor,\n    // we'll use this information to extend the selection.\n    if (hasFocus) {\n      selection.removeAllRanges();\n      addPointToSelection(selection, node, focusOffset - nodeStart, selectionState);\n    } // If this node has the anchor, we may assume that the correct\n    // focus information is already stored on the selection object.\n    // We keep track of it, reset the selection range, and extend it\n    // back to the focus point.\n\n\n    if (hasAnchor) {\n      var storedFocusNode = selection.focusNode;\n      var storedFocusOffset = selection.focusOffset;\n      selection.removeAllRanges();\n      addPointToSelection(selection, node, anchorOffset - nodeStart, selectionState);\n      addFocusToSelection(selection, storedFocusNode, storedFocusOffset, selectionState);\n    }\n  }\n}\n/**\n * Extend selection towards focus point.\n */\n\n\nfunction addFocusToSelection(selection, node, offset, selectionState) {\n  var activeElement = getActiveElement();\n  var extend = selection.extend; // containsNode returns false if node is null.\n  // Let's refine the type of this value out here so flow knows.\n\n  if (extend && node != null && containsNode(activeElement, node)) {\n    // If `extend` is called while another element has focus, an error is\n    // thrown. We therefore disable `extend` if the active element is somewhere\n    // other than the node we are selecting. This should only occur in Firefox,\n    // since it is the only browser to support multiple selections.\n    // See https://bugzilla.mozilla.org/show_bug.cgi?id=921444.\n    // logging to catch bug that is being reported in t16250795\n    if (offset > getNodeLength(node)) {\n      // the call to 'selection.extend' is about to throw\n      DraftJsDebugLogging.logSelectionStateFailure({\n        anonymizedDom: getAnonymizedEditorDOM(node),\n        extraParams: JSON.stringify({\n          offset: offset\n        }),\n        selectionState: JSON.stringify(selectionState.toJS())\n      });\n    } // logging to catch bug that is being reported in t18110632\n\n\n    var nodeWasFocus = node === selection.focusNode;\n\n    try {\n      // Fixes some reports of \"InvalidStateError: Failed to execute 'extend' on\n      // 'Selection': This Selection object doesn't have any Ranges.\"\n      // Note: selection.extend does not exist in IE.\n      if (selection.rangeCount > 0 && selection.extend) {\n        selection.extend(node, offset);\n      }\n    } catch (e) {\n      DraftJsDebugLogging.logSelectionStateFailure({\n        anonymizedDom: getAnonymizedEditorDOM(node, function (n) {\n          var labels = [];\n\n          if (n === activeElement) {\n            labels.push('active element');\n          }\n\n          if (n === selection.anchorNode) {\n            labels.push('selection anchor node');\n          }\n\n          if (n === selection.focusNode) {\n            labels.push('selection focus node');\n          }\n\n          return labels;\n        }),\n        extraParams: JSON.stringify({\n          activeElementName: activeElement ? activeElement.nodeName : null,\n          nodeIsFocus: node === selection.focusNode,\n          nodeWasFocus: nodeWasFocus,\n          selectionRangeCount: selection.rangeCount,\n          selectionAnchorNodeName: selection.anchorNode ? selection.anchorNode.nodeName : null,\n          selectionAnchorOffset: selection.anchorOffset,\n          selectionFocusNodeName: selection.focusNode ? selection.focusNode.nodeName : null,\n          selectionFocusOffset: selection.focusOffset,\n          message: e ? '' + e : null,\n          offset: offset\n        }, null, 2),\n        selectionState: JSON.stringify(selectionState.toJS(), null, 2)\n      }); // allow the error to be thrown -\n      // better than continuing in a broken state\n\n      throw e;\n    }\n  } else {\n    // IE doesn't support extend. This will mean no backward selection.\n    // Extract the existing selection range and add focus to it.\n    // Additionally, clone the selection range. IE11 throws an\n    // InvalidStateError when attempting to access selection properties\n    // after the range is detached.\n    if (node && selection.rangeCount > 0) {\n      var range = selection.getRangeAt(0);\n      range.setEnd(node, offset);\n      selection.addRange(range.cloneRange());\n    }\n  }\n}\n\nfunction addPointToSelection(selection, node, offset, selectionState) {\n  var range = getCorrectDocumentFromNode(node).createRange(); // logging to catch bug that is being reported in t16250795\n\n  if (offset > getNodeLength(node)) {\n    // in this case we know that the call to 'range.setStart' is about to throw\n    DraftJsDebugLogging.logSelectionStateFailure({\n      anonymizedDom: getAnonymizedEditorDOM(node),\n      extraParams: JSON.stringify({\n        offset: offset\n      }),\n      selectionState: JSON.stringify(selectionState.toJS())\n    });\n    DraftEffects.handleExtensionCausedError();\n  }\n\n  range.setStart(node, offset); // IE sometimes throws Unspecified Error when trying to addRange\n\n  if (isIE) {\n    try {\n      selection.addRange(range);\n    } catch (e) {\n      if (process.env.NODE_ENV !== \"production\") {\n        /* eslint-disable-next-line no-console */\n        console.warn('Call to selection.addRange() threw exception: ', e);\n      }\n    }\n  } else {\n    selection.addRange(range);\n  }\n}\n\nmodule.exports = {\n  setDraftEditorSelection: setDraftEditorSelection,\n  addFocusToSelection: addFocusToSelection\n};","map":{"version":3,"names":["DraftEffects","require","DraftJsDebugLogging","UserAgent","containsNode","getActiveElement","getCorrectDocumentFromNode","invariant","isElement","isIE","isBrowser","getAnonymizedDOM","node","getNodeLabels","anonymized","anonymizeTextWithin","nodeType","Node","TEXT_NODE","textContent","process","env","NODE_ENV","castedElement","outerHTML","labels","undefined","length","createTextNode","join","clone","cloneNode","setAttribute","childNodes","ii","appendChild","getAnonymizedEditorDOM","currentNode","castedNode","hasAttribute","parentNode","getNodeLength","nodeValue","setDraftEditorSelection","selectionState","blockKey","nodeStart","nodeEnd","documentObject","documentElement","selection","defaultView","getSelection","anchorKey","getAnchorKey","anchorOffset","getAnchorOffset","focusKey","getFocusKey","focusOffset","getFocusOffset","isBackward","getIsBackward","extend","tempKey","tempOffset","hasAnchor","hasFocus","removeAllRanges","addPointToSelection","addFocusToSelection","storedFocusNode","focusNode","storedFocusOffset","offset","activeElement","logSelectionStateFailure","anonymizedDom","extraParams","JSON","stringify","toJS","nodeWasFocus","rangeCount","e","n","push","anchorNode","activeElementName","nodeName","nodeIsFocus","selectionRangeCount","selectionAnchorNodeName","selectionAnchorOffset","selectionFocusNodeName","selectionFocusOffset","message","range","getRangeAt","setEnd","addRange","cloneRange","createRange","handleExtensionCausedError","setStart","console","warn","module","exports"],"sources":["/home/sudhanshu/Documents/combett/node_modules/draft-js/lib/setDraftEditorSelection.js"],"sourcesContent":["/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @format\n * \n * @emails oncall+draft_js\n */\n'use strict';\n\nvar DraftEffects = require(\"./DraftEffects\");\n\nvar DraftJsDebugLogging = require(\"./DraftJsDebugLogging\");\n\nvar UserAgent = require(\"fbjs/lib/UserAgent\");\n\nvar containsNode = require(\"fbjs/lib/containsNode\");\n\nvar getActiveElement = require(\"fbjs/lib/getActiveElement\");\n\nvar getCorrectDocumentFromNode = require(\"./getCorrectDocumentFromNode\");\n\nvar invariant = require(\"fbjs/lib/invariant\");\n\nvar isElement = require(\"./isElement\");\n\nvar isIE = UserAgent.isBrowser('IE');\n\nfunction getAnonymizedDOM(node, getNodeLabels) {\n  if (!node) {\n    return '[empty]';\n  }\n\n  var anonymized = anonymizeTextWithin(node, getNodeLabels);\n\n  if (anonymized.nodeType === Node.TEXT_NODE) {\n    return anonymized.textContent;\n  }\n\n  !isElement(anonymized) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Node must be an Element if it is not a text node.') : invariant(false) : void 0;\n  var castedElement = anonymized;\n  return castedElement.outerHTML;\n}\n\nfunction anonymizeTextWithin(node, getNodeLabels) {\n  var labels = getNodeLabels !== undefined ? getNodeLabels(node) : [];\n\n  if (node.nodeType === Node.TEXT_NODE) {\n    var length = node.textContent.length;\n    return getCorrectDocumentFromNode(node).createTextNode('[text ' + length + (labels.length ? ' | ' + labels.join(', ') : '') + ']');\n  }\n\n  var clone = node.cloneNode();\n\n  if (clone.nodeType === 1 && labels.length) {\n    clone.setAttribute('data-labels', labels.join(', '));\n  }\n\n  var childNodes = node.childNodes;\n\n  for (var ii = 0; ii < childNodes.length; ii++) {\n    clone.appendChild(anonymizeTextWithin(childNodes[ii], getNodeLabels));\n  }\n\n  return clone;\n}\n\nfunction getAnonymizedEditorDOM(node, getNodeLabels) {\n  // grabbing the DOM content of the Draft editor\n  var currentNode = node; // this should only be used after checking with isElement\n\n  var castedNode = currentNode;\n\n  while (currentNode) {\n    if (isElement(currentNode) && castedNode.hasAttribute('contenteditable')) {\n      // found the Draft editor container\n      return getAnonymizedDOM(currentNode, getNodeLabels);\n    } else {\n      currentNode = currentNode.parentNode;\n      castedNode = currentNode;\n    }\n  }\n\n  return 'Could not find contentEditable parent of node';\n}\n\nfunction getNodeLength(node) {\n  return node.nodeValue === null ? node.childNodes.length : node.nodeValue.length;\n}\n/**\n * In modern non-IE browsers, we can support both forward and backward\n * selections.\n *\n * Note: IE10+ supports the Selection object, but it does not support\n * the `extend` method, which means that even in modern IE, it's not possible\n * to programatically create a backward selection. Thus, for all IE\n * versions, we use the old IE API to create our selections.\n */\n\n\nfunction setDraftEditorSelection(selectionState, node, blockKey, nodeStart, nodeEnd) {\n  // It's possible that the editor has been removed from the DOM but\n  // our selection code doesn't know it yet. Forcing selection in\n  // this case may lead to errors, so just bail now.\n  var documentObject = getCorrectDocumentFromNode(node);\n\n  if (!containsNode(documentObject.documentElement, node)) {\n    return;\n  }\n\n  var selection = documentObject.defaultView.getSelection();\n  var anchorKey = selectionState.getAnchorKey();\n  var anchorOffset = selectionState.getAnchorOffset();\n  var focusKey = selectionState.getFocusKey();\n  var focusOffset = selectionState.getFocusOffset();\n  var isBackward = selectionState.getIsBackward(); // IE doesn't support backward selection. Swap key/offset pairs.\n\n  if (!selection.extend && isBackward) {\n    var tempKey = anchorKey;\n    var tempOffset = anchorOffset;\n    anchorKey = focusKey;\n    anchorOffset = focusOffset;\n    focusKey = tempKey;\n    focusOffset = tempOffset;\n    isBackward = false;\n  }\n\n  var hasAnchor = anchorKey === blockKey && nodeStart <= anchorOffset && nodeEnd >= anchorOffset;\n  var hasFocus = focusKey === blockKey && nodeStart <= focusOffset && nodeEnd >= focusOffset; // If the selection is entirely bound within this node, set the selection\n  // and be done.\n\n  if (hasAnchor && hasFocus) {\n    selection.removeAllRanges();\n    addPointToSelection(selection, node, anchorOffset - nodeStart, selectionState);\n    addFocusToSelection(selection, node, focusOffset - nodeStart, selectionState);\n    return;\n  }\n\n  if (!isBackward) {\n    // If the anchor is within this node, set the range start.\n    if (hasAnchor) {\n      selection.removeAllRanges();\n      addPointToSelection(selection, node, anchorOffset - nodeStart, selectionState);\n    } // If the focus is within this node, we can assume that we have\n    // already set the appropriate start range on the selection, and\n    // can simply extend the selection.\n\n\n    if (hasFocus) {\n      addFocusToSelection(selection, node, focusOffset - nodeStart, selectionState);\n    }\n  } else {\n    // If this node has the focus, set the selection range to be a\n    // collapsed range beginning here. Later, when we encounter the anchor,\n    // we'll use this information to extend the selection.\n    if (hasFocus) {\n      selection.removeAllRanges();\n      addPointToSelection(selection, node, focusOffset - nodeStart, selectionState);\n    } // If this node has the anchor, we may assume that the correct\n    // focus information is already stored on the selection object.\n    // We keep track of it, reset the selection range, and extend it\n    // back to the focus point.\n\n\n    if (hasAnchor) {\n      var storedFocusNode = selection.focusNode;\n      var storedFocusOffset = selection.focusOffset;\n      selection.removeAllRanges();\n      addPointToSelection(selection, node, anchorOffset - nodeStart, selectionState);\n      addFocusToSelection(selection, storedFocusNode, storedFocusOffset, selectionState);\n    }\n  }\n}\n/**\n * Extend selection towards focus point.\n */\n\n\nfunction addFocusToSelection(selection, node, offset, selectionState) {\n  var activeElement = getActiveElement();\n  var extend = selection.extend; // containsNode returns false if node is null.\n  // Let's refine the type of this value out here so flow knows.\n\n  if (extend && node != null && containsNode(activeElement, node)) {\n    // If `extend` is called while another element has focus, an error is\n    // thrown. We therefore disable `extend` if the active element is somewhere\n    // other than the node we are selecting. This should only occur in Firefox,\n    // since it is the only browser to support multiple selections.\n    // See https://bugzilla.mozilla.org/show_bug.cgi?id=921444.\n    // logging to catch bug that is being reported in t16250795\n    if (offset > getNodeLength(node)) {\n      // the call to 'selection.extend' is about to throw\n      DraftJsDebugLogging.logSelectionStateFailure({\n        anonymizedDom: getAnonymizedEditorDOM(node),\n        extraParams: JSON.stringify({\n          offset: offset\n        }),\n        selectionState: JSON.stringify(selectionState.toJS())\n      });\n    } // logging to catch bug that is being reported in t18110632\n\n\n    var nodeWasFocus = node === selection.focusNode;\n\n    try {\n      // Fixes some reports of \"InvalidStateError: Failed to execute 'extend' on\n      // 'Selection': This Selection object doesn't have any Ranges.\"\n      // Note: selection.extend does not exist in IE.\n      if (selection.rangeCount > 0 && selection.extend) {\n        selection.extend(node, offset);\n      }\n    } catch (e) {\n      DraftJsDebugLogging.logSelectionStateFailure({\n        anonymizedDom: getAnonymizedEditorDOM(node, function (n) {\n          var labels = [];\n\n          if (n === activeElement) {\n            labels.push('active element');\n          }\n\n          if (n === selection.anchorNode) {\n            labels.push('selection anchor node');\n          }\n\n          if (n === selection.focusNode) {\n            labels.push('selection focus node');\n          }\n\n          return labels;\n        }),\n        extraParams: JSON.stringify({\n          activeElementName: activeElement ? activeElement.nodeName : null,\n          nodeIsFocus: node === selection.focusNode,\n          nodeWasFocus: nodeWasFocus,\n          selectionRangeCount: selection.rangeCount,\n          selectionAnchorNodeName: selection.anchorNode ? selection.anchorNode.nodeName : null,\n          selectionAnchorOffset: selection.anchorOffset,\n          selectionFocusNodeName: selection.focusNode ? selection.focusNode.nodeName : null,\n          selectionFocusOffset: selection.focusOffset,\n          message: e ? '' + e : null,\n          offset: offset\n        }, null, 2),\n        selectionState: JSON.stringify(selectionState.toJS(), null, 2)\n      }); // allow the error to be thrown -\n      // better than continuing in a broken state\n\n      throw e;\n    }\n  } else {\n    // IE doesn't support extend. This will mean no backward selection.\n    // Extract the existing selection range and add focus to it.\n    // Additionally, clone the selection range. IE11 throws an\n    // InvalidStateError when attempting to access selection properties\n    // after the range is detached.\n    if (node && selection.rangeCount > 0) {\n      var range = selection.getRangeAt(0);\n      range.setEnd(node, offset);\n      selection.addRange(range.cloneRange());\n    }\n  }\n}\n\nfunction addPointToSelection(selection, node, offset, selectionState) {\n  var range = getCorrectDocumentFromNode(node).createRange(); // logging to catch bug that is being reported in t16250795\n\n  if (offset > getNodeLength(node)) {\n    // in this case we know that the call to 'range.setStart' is about to throw\n    DraftJsDebugLogging.logSelectionStateFailure({\n      anonymizedDom: getAnonymizedEditorDOM(node),\n      extraParams: JSON.stringify({\n        offset: offset\n      }),\n      selectionState: JSON.stringify(selectionState.toJS())\n    });\n    DraftEffects.handleExtensionCausedError();\n  }\n\n  range.setStart(node, offset); // IE sometimes throws Unspecified Error when trying to addRange\n\n  if (isIE) {\n    try {\n      selection.addRange(range);\n    } catch (e) {\n      if (process.env.NODE_ENV !== \"production\") {\n        /* eslint-disable-next-line no-console */\n        console.warn('Call to selection.addRange() threw exception: ', e);\n      }\n    }\n  } else {\n    selection.addRange(range);\n  }\n}\n\nmodule.exports = {\n  setDraftEditorSelection: setDraftEditorSelection,\n  addFocusToSelection: addFocusToSelection\n};"],"mappings":"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"},"metadata":{},"sourceType":"script"}